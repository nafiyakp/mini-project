{% extends 'admin/adminindex.html' %}
{% block body %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- TemplateBeginEditable name="doctitle" -->
<title>Untitled Document</title>
<!-- TemplateEndEditable -->
<!-- TemplateBeginEditable name="head" -->
<!-- TemplateEndEditable -->
</head>

<body>
<form id="form1" name="form1" method="post" action="/myapp/change_password_post/" onsubmit="return validateForm()">
    {% csrf_token %}

    <table class="table table-bordered table-striped table-hover">
      <tr>
        <td width="216" height="56">CURRENT PASSWORD</td>
        <td width="184">
          <label>
            <input type="password" name="current_password" id="current_password" class="form-control"
                   required />
          </label>
        </td>
      </tr>
      <tr>
        <td height="50">NEW PASSWORD</td>
        <td>
          <label>
            <input type="password" name="new_password" id="new_password" class="form-control"
                   pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                   title="Must contain at least one number, one uppercase letter, one lowercase letter, and at least 8 characters"
                   required />
          </label>
        </td>
      </tr>
      <tr>
        <td height="50">CONFIRM PASSWORD</td>
        <td>
          <label>
            <input type="password" name="confirm_password" id="confirm_password" class="form-control"
                   pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                   title="Must contain at least one number, one uppercase letter, one lowercase letter, and at least 8 characters"
                   required />
          </label>
        </td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td><input type="submit" name="submit" id="submit" value="RESET" class="btn btn-success" /></td>
      </tr>
    </table>
</form>

<script>
  function validateForm() {
    // Get the password values
    var newPassword = document.getElementById("new_password").value;
    var confirmPassword = document.getElementById("confirm_password").value;

    // Check if the new password and confirm password match
    if (newPassword !== confirmPassword) {
        alert("New password and confirm password do not match.");
        return false; // Prevent form submission
    }

    // Check if the password meets the required pattern
    var passwordPattern = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
    if (!passwordPattern.test(newPassword)) {
        alert("Password must contain at least one number, one uppercase letter, one lowercase letter, and at least 8 characters.");
        return false; // Prevent form submission
    }

    // Form is valid, allow submission
    return true;
  }
</script>

{#<form id="form1" name="form1" method="post" action="/myapp/change_password_post/">#}
{#    {% csrf_token %}#}
{##}
{#<table class="table table-bordered table-striped table-hover">#}
{#  <tr>#}
{#    <td width="216" height="56">CURRENT PASSWORD</td>#}
{#    <td width="184"> <label>#}
{#            <input type="text" name="current password" id="3" class="form-control" pattern="(?=.*\d)(?=.*[a-z](?=.*[A-Z]).{8,}" title="Must contain atleast one number and one uppercase and lowercase letter,and at least 8 or more charectrs "required/>#}
{#    </label></td>#}
{#  </tr>#}
{#  <tr>#}
{#    <td height="50">NEW PASSWORD</td>#}
{#    <td><label>#}
{#      <input type="password" name="new password" id="2"class="form-control"  pattern="(?=.*\d)(?=.*[a-z](?=.*[A-Z]).{8,}" title="Must contain atleast one number and one uppercase and lowercase letter,and at least 8 or more charectrs "required/>#}
{#    </label></td>#}
{#  </tr>#}
{#  <tr>#}
{#    <td height="50">CONFIRM PASSWORD</td>#}
{#    <td><label>#}
{#      <input type="password" name="confirm password" id="4" class="form-control" pattern="(?=.*\d)(?=.*[a-z](?=.*[A-Z]).{8,}" title="Must contain atleast one number and one uppercase and lowercase letter,and at least 8 or more charectrs "required/>#}
{#    </label></td>#}
{#  </tr>#}
{#  <tr>#}
{#    <td>&nbsp;</td>#}
{#    <td><input type="submit" name="22" id="22" value="RESET"class="btn btn-success" /></td>#}
{#  </tr>#}
{#</table>#}
{#</form>#}
</body>
</html>
{% endblock %}